# Safe ledger

Tool to extended foundry generated broadcast simulation.

# Installation Steps

```
$ virtualenv .venv
$ source .venv/bin/activate
$ pip install -r requirements.txt
```

## Usage

#### Extend transaction simulation json with SafeTx and Signer placeholders

Following inputs are needed to create SafeTx and Signature placeholders:

- Foundry simulation of RoleActions JSON: `input.json`
- Safe info JSON generated by RoleActions : `ETHEREUM-SAFE.json`

```bash
cd /contracts/tools/safe-ledger/cli
python safe-ledger.py extend -i input.json -s ETHEREUM-SAFE.json -o safe-transactions.json
```

#### Collate all the signature in one and create flat JSON with SafeTx

````bash
cd /contracts/tools/safe-ledger/cli
python safe-ledger.py collate -i signed-transactions.json  -o full_output.json -f flat_output.json```
````

`full_output.json`: This is the extended foundry simulation JSON with all the extra information along with collated signatures.
`flat_output.json`: This is the flattened version of `full_output.json' needed by foundry script to submit these transaction by any gas paying account.
